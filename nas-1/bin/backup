#!/usr/bin/env bash
set -eo pipefail

[[ -z $1 ]] && echo "No file provided" && exit 1
FILE=$1

echo "> Reading: $FILE"
SOURCES=""
while read SOURCE
do
    echo "> Found: $SOURCE"
    SOURCES="$SOURCES $SOURCE"
done < $FILE

_TARGET=`basename $FILE`
TARGET=${_TARGET//.//}

DESTINATION=/volume1/$TARGET
echo "rsync -hav --delete $SOURCES $DESTINATION"
